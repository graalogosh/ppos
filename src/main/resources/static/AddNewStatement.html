<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!--- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/AddNewStatement.css" rel="stylesheet">
    <link href="css/jquery.dataTables.css" rel="stylesheet">

    <!--- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!---[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
     
  </head>
  <body>
  
  <!-- Выпадающее "Меню" -->
  <div class="container">
      <div class="row">
          <div class="navbar navbar-inverse">
              <div class="conteiner">
                  <div class="collapse navbar-collapse">
                      <ul class="nav navbar-nav">
                          <li class="dropdown">
                             <a href="#" class="dropdown-toggle" data-toggle="dropdown">Меню <b class="caret"></b></a>
                              <ul class="dropdown-menu">
                                  <li><a href="#">Пункт1</a></li>
                                  <li><a href="#">Пункт2</a></li>
                                  <li><a href="#">Пункт3</a></li>
                                  <li><a href="#">Пункт4</a></li>
                                  <li><a href="#">Пункт5</a></li>
                              </ul>
                          </li>
                      </ul>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <!-- Конец выпадающего "Меню" -->
  
  
   <div class="container">
       <div class="panel panel-default">
           <div class="panel-heading">
               Студент
           </div>
           <ul class="list-group">
              <li class="list-group-item">
                  <div class="row">
                     <!-- номер студенческого и группа -->
                      <form class="form-horizontal col-md-4 col-lg-4">
                         <!-- номер студенческого -->
                          <div class="form-group">
                              <label class="control-label col-md-6 col-lg-6" for="studentID">№ студенческого:</label>
                              <div class="col-md-6 col-lg-6">
                                  <input type="text" class="form-control" id="studentID">
                              </div>
                          </div>
                          <!-- конец номера студенческого -->
                          
                          <!-- группа -->
                          <div class="form-group">
                              <label class="control-label col-md-6 col-lg-6" for="educationalGroup">Группа:</label>
                              <div class="col-md-6 col-lg-6">
                                  <input type="text" class="form-control" id="educationalGroup" disabled>
                              </div>
                          </div>
                          <!-- конец руппы -->
                      </form>
                      <!-- конец блока с номером студенческого и группы -->
                      
                      <!-- номер телефона и банковского счёта -->
                      <form class="form-horizontal col-md-5 col-lg-5">
                          <!-- номер телефона -->
                          <div class="form-group">
                              <label class="control-label col-md-4 col-lg-3" for="phone">Телефон:</label>
                              <div class="col-md-8 col-lg-9">
                                  <input type="tel" class="form-control" id="phone" disabled>
                              </div>
                          </div>
                          <!-- конец номера телефона -->
                          
                          <!-- банковский счёт -->
                          <div class="form-group">
                              <label class="control-label col-md-4 col-lg-3" for="bankAccountNumber">Банк. счёт:</label>
                              <div class="col-md-8 col-lg-9">
                                  <input type="text" class="form-control" id="bankAccountNumber">
                              </div>
                          </div>
                          <!-- конец банковского счёта -->
                      </form>
                      <!-- конец блока с номером телефона и банковского счёта <-->
                      
                      <!-- кнопки "Найти" и "Открыть карточку студента" -->
                      <form class="form-horizontal col-md-3 col-lg-3 pull-right">
                          <div class="btn-group-vertical visible-md visible-lg" role="group">
                              <button type="button" class="btn btn-success" onclick="onClickFind()">Найти</button>
                              <button type="button" class="btn btn-primary">Открыть карточку студента</button>
                          </div>
                          <div class="btn-group visible-sm visible-xs" role="group">
                              <button type="button" class="btn btn-success" onclick="onClickFind()">Найти</button>
                              <button type="button" class="btn btn-primary">Открыть карточку студента</button>
                          </div>   
                      </form>
                      <!-- конец блока с кнопками "Найти" и "Открыть карточку студента" -->
                  </div>
                  <div class="row">
                    <form class="form-horizontal col-md-12 col-lg-12">
                      <div class="form-group">
                        <label class="control-label col-md-1 col-lg-1" for="fio">Ф.И.О.:</label>
                        <div class="col-md-11 col-lg-11">
                          <input type="text" class="form-control" id="fio" disabled>
                        </div>
                      </div>
                    </form>
                  </div>
               </li>
               <li class="list-group-item">
                   <div class="row">
                       <form class="form-horizontal col-md-6 col-lg-6">
                           <!-- раздел -->
                           <div class="form-group">
                               <label class="control-label col-lg-2" for="sectionID">Раздел:</label>
                                  <div class="col-lg-10">
                                   <select class="form-control" id="sectionID" onchange="onChangeSection()">
                                    <option value="0" disabled selected style="display:none;">Выберите раздел</option>
                                   </select>
                                 </div>
                           </div>
                           <!-- конец раздела -->
                           </form>
                           
                        <form class="form-horizontal col-md-6 col-lg-6">
                           <!-- мероприятие -->
                           <div class="form-group">
                               <label class="control-label col-lg-3" for="eventID">Мероприятие:</label>
                               <div class="col-lg-9">
                                 <select class="form-control" id="eventID">
                                  <option value="0" disabled selected style="display:none;">Выберите мероприятие</option>
                                 </select>
                               </div>
                           </div>
                           <!-- конец мероприятия -->
                       </form>
                   </div>
               </li>
           </ul>
           <div class="panel-heading">
               Общественная работа
           </div>
           <ul class="list-group">
               <li class="list-group-item">
                   <div class="row">
                       <form class="form-horizontal col-md-6 col-lg-6">                           
                           <!-- категория -->
                           <div class="form-group">
                               <label class="control-label col-lg-3" for="socialWorkCategory">Категория:</label>
                                  <div class="col-lg-9">
                                     <select class="form-control" id="socialWorkCategory">
                                        <option value="0" disabled selected style="display:none;">Выберите категорию</option>
                                      </select>
                                  </div>
                           </div>
                           <!-- конец категории -->
                           </form>
                           
                        <form class="form-horizontal col-md-6 col-lg-6">
                           <!-- общественная работа -->
                           <div class="form-group">
                               <label class="control-label col-lg-3" for="socialWork">Общ. работа:</label>
                               <div class="col-lg-9">
                                 <select class="form-control" id="socialWork">
                                    <option value="0" disabled selected style="display:none;">Выберите общественную работу</option>
                                 </select>
                               </div>
                           </div>
                           <!-- конец общественной работы -->
                       </form>
                   </div>
               </li>
           </ul>
           <div class="panel-heading">
               Социальный статус
           </div>
           <ul class="list-group">
               <li class="list-group-item">                   
                   <div class="row">
                       <form class="form-horizontal col-md-6 col-lg-6">
                           <div class="form-group">
                               <label class="control-label col-lg-5" for="socialCategory">Социальная категория:</label>
                               <div class="col-lg-7">
                                 <select class="form-control" id="socialCategory">
                                    <option value="0" disabled selected style="display:none;">Выберите социальную категорию</option>
                                 </select>
                               </div>
                           </div>
                           <label class="checkbox-inline"><input type="checkbox" id="completeDocs">Все документы в наличии</label>
                           <label class="checkbox-inline"><input type="checkbox" id="socialGrant">Социальная стипендия</label>
                       </form>
                       <div class="form-horizontal col-md-6 col-lg-6">
                           <div class="form-group col-sm-4 col-md-6 col-lg-6">
                               <label for="documents">Необходимые документы:</label>
                               <p><textarea id="documents" disabled></textarea></p>
                           </div>
                           <div class="form-group col-sm-4 col-md-6 col-lg-6">
                               <label for="comment">Комментарий:</label>
                               <p><textarea id="comment"></textarea></p>
                           </div>
                       </div>
                   </div>
               </li>
           </ul>
           <div class="panel-heading">
               Дополнительные параметры
           </div>
           <ul class="list-group">
               <li class="list-group-item">
                   <div class="row">
                         <form class="form-horizontal col-md-4 col-lg-4">
                             <div class="form-group">
                                 <label class="control-label col-lg-3" for="score">Оценки:</label>
                                 <div class="col-lg-9">
                                   <div class="input-group">
                                       <input type="text" class="form-control" id="score">
                                       <span class="input-group-btn">
                                       <button class="btn btn-default" type="button" onclick="onClickСalculate()">Рассчитать</button>
                                       </span>
                                   </div> 
                                 </div>                                  
                             </div>
                         </form>
                             <form class="form-horizontal col-md-4 col-lg-3">
                               <div class="form-group">
                                   <label class="control-label col-lg-6" for="average_score">Средний балл:</label>
                                   <div class="col-lg-6">
                                     <input type="text" class="form-control" id="average_score" disabled>
                                   </div>                      
                               </div>
                             </form>
                             <form class="form-horizontal col-md-4 col-lg-2">
                               <div class="form-group">
                                   <label class="control-label col-lg-4" for="moneyCategory">Сумма:</label>
                                   <div class="col-lg-8">
                                     <input type="text" class="form-control" id="moneyCategory" disabled>
                                   </div>
                               </div>
                             </form>
                             <form class="form-horizontal col-lg-3">
                               <div class="btn-group pull-right">
                                   <button type="submit" class="btn btn-success">Добавить</button>
                                   <button type="submit" class="btn btn-primary">Отмена</button>
                               </div>
                             </form>
                         </form>
                   </div>
               </li>
           </ul>
       </div>
   </div>
    




    <!-- Когда документ загрузится - запрашиваем данные о разделах мероприятий и записываем их в элемент sectionID -->
    <script>
      $(document).ready(function() {
        $.getJSON('https://graalogosh.tk/sections', function(data) {
            $.each(data, function(index, el) {
              $('<option value="' + el.sectionID + '">' + el.title + '</option>').appendTo("#sectionID");
            });
        });
      });
    </script>


<!-- ____________________________________________________________________________________________________ -->


    <!-- Поиск студента по номеру студенческого при нажатии на кнопку "Найти" и вывод информации о нём -->
    <script>
      function onClickFind () {
        var query_data = sendInform("studentID");

        <!-- Если воле номера студенческого не заполнили, то выводим об этом сообщение с предупреждением и завершаем скрипт -->
        if (query_data["studentID"] == "") {
          alert ("Не введён номер студенческого.");
          return;
        }

        $.getJSON('https://graalogosh.tk/students', query_data, function(data) {
            $.each(data, function(index, el) {
              $("#educationalGroup").val(el.educationalGroup);
              $("#phone").val(el.phone);
              $("#bankAccountNumber").val(el.bankAccountNumber);
              $("#fio").val(el.name);
            });
        });
      }
    </script> 


<!-- ____________________________________________________________________________________________________ -->


    <!-- Проверка нажимаемых клавиш при вводе оценок в элементе score. Разрешаются только цифры 2, 3, 4, 5 и клавиши Delete и Backspace,
         а также стрелок вправо и влево (для навигации) -->
    <script>
      score.onkeydown = function(event) {
        if (event.keyCode != "50" && event.keyCode != "51" && event.keyCode != "52" && event.keyCode != "53" && event.keyCode != "46" && event.keyCode != "8" && event.keyCode != "37" && event.keyCode != "39") {
          return false;
        }
      }
    </script>


<!-- ____________________________________________________________________________________________________ -->


    <!-- Рассчитывание средней оценки студента и запись в value элемента c id=calculateButton -->
    <script>
	    function onClickСalculate() {
	      $("#average_score").val(averageEstimates("score"));
	    }
    </script>


<!-- ____________________________________________________________________________________________________ -->


		<!-- Заполняем поле eventID мероприятиями по выбранному разделу мероприятий -->
		<!-- Надо дописать выделение нужных и ненужных блоков для выбранного раздела -->
		<script>
			function onChangeSelect() {
				var query_data = sendInform("sectionID");
				$.getJSON('https://graalogosh.tk/events', query_data, function(data) {
						$.each(data, function(index, el) {
							 $('<option value="' + el.eventID + '">' + el.title + '</option>').appendTo('#eventID');
						});
				});
			}
		</script>

  <!-- Подключаемые скрипты -->
  <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="js/jquery.dataTables.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/function_sendInform.js"></script>
  <script type="text/javascript" src="js/function_averageEstimates.js"></script>


  </body>
</html>