<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Учёт взносов</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/Main.css" rel="stylesheet">
    <link href="css/jquery.dataTables.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        
    
</head>
<body>
      <!- Выпадающее "Меню" -->
      <div class="container">
          <div class="row">
              <div class="navbar navbar-inverse">
                  <div class="conteiner">
                      <div class="collapse navbar-collapse">
                          <ul class="nav navbar-nav">
                              <li class="dropdown">
                                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">Меню <b class="caret"></b></a>
                                  <ul class="dropdown-menu">
                                    <li><a href="main.html">Все студенты</a></li>
                                    <li><a href="documentationshow.html">Студенты без документов</a></li>
                                    <li><a href="statementstatistic.html">Статистика по заявлениям</a></li>
                                    <li><a href="socialscholarshipstatistic.html">Социальная стипендия</a></li>
                                    <li><a href="printlist.html">Печать ведомостей</a></li>
                                    <li><a href="competition.html">Конкурсный отбор</li>
                                    <li><a href="edinovremstatistic.html">Статистика по единовременной поддержке</a></li>
                                    <li><a href="adminsettingsform.html">Настройки</a></li>
                                  </ul>
                              </li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <!- Конец выпадающего "Меню" -->
      
      <div class="container">
        <ul class="list-group">
          <li class="list-group-item">
            <div class="row">
              <!- блок Номер Студенческого и Номер Телефона -->
              <form class="form-horizontal col-lg-4 col-md-4">
                <div class="form-group">
                  <label for="studentID" class="control-label col-lg-6 col-md-6">Номер студенческого:</label>
                  <div class="col-lg-6 col-md-6">
                    <input class="form-control" type="text" id="studentID">
                  </div>
                </div>
                <div class="form-group">
                  <label for="phone" class="control-label col-lg-6 col-md-6">Номер телефона:</label>
                  <div class="col-lg-6 col-md-6">
                    <input class="form-control" type="text" id="phone" pattern="8\(\d\d\d\) \d\d\d\-\d\d\d\d">
                  </div>
                </div>
              </form>
              <!- конец блока Номер Студенческого и Номер Телефона -->
            
              <!- блок ФИО, Группа и Факультет -->
              <div class="col-lg-6 col-md-6">
                <div class="row">
                  <form class="form-horizontal col-sm-12">
                    <div class="form-group">
                      <label for="name" class="control-label col-lg-2 col-md-2">Ф.И.О.:</label>
                      <div class="col-lg-10 col-md-10">
                        <input class="form-control" type="text" id="name">
                      </div>
                    </div>
                  </form>
                </div>
                <div class="row">
                  <form class="form-horizontal col-lg-6 col-md-6">
                    <div class="form-group">
                      <label for="educationalGroup" class="control-label col-lg-4 col-md-4">Группа:</label>
                      <div class="col-lg-8 col-md-8">
                        <input class="form-control" type="text" id="educationalGroup">
                      </div>
                    </div>
                  </form>
                  <form class="form-horizontal col-lg-6 col-md-6">
                    <div class="form-group">
                      <label for="faculty" class="control-label col-lg-4 col-md-5">Факультет:</label>
                      <div class="col-lg-8 col-md-7">
                        <select class="form-control" id="faculty">
                          <option value="0" disabled selected style="display:none;">Факультет</option>
                        </select>
                      </div>
                    </div>  
                  </form>
                </div>
              </div>
              <!- конец блока ФИО, Группа и Факультет -->

              <!- блок радиокнопок с выбором категории студентов -->
              <div class="col-lg-2 col-md-2">
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
                    Все студенты
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
                    Студенты с долгами
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
                    Студенты без долгов
                  </label>
                </div>
              </div>
              <!- конец блока радиокнопок категории студентов -->
            </div>
            <div class="row">
              <!- кнопки "Найти" и "Сбросить" -->
              <form class="form-horizontal col-lg-4 pull-right">
                <div class="btn-group" role="group">
                  <button type="button" class="btn btn-success" onclick="onClickFind()">Найти</button>
                  <button type="button" class="btn btn-primary" onclick="onClickClear()">Сбросить</button>
                </div>
              </form>
              <!- конец блока с кнопками "Найти" и "Сбросить" -->
            </div>
          </li>
          
          <!- Таблица -->
          <li class="list-group-item">
            <table class="table table-striped" id="accountingFees">
              <thead>
                <th>Номер студенческого</th>
                <th>Ф.И.О.</th>
                <th>Группа</th>
                <th>Учебный статус</th>
                <th>Финансовый статус</th>
                <th>Факультет</th>
                <th>Телефон</th>
                <th>Оплатил</th>
                <th>Должен оплатить</th>
              </thead>
              <tbody>
              </tbody>
            </table>
          </li>
        </ul>
      </div>




    <!-- Подключение скриптов -->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery.mask.min.js"></script>
    <script type="text/javascript" src="js/function_sendInform.js"></script>


<!-- ____________________________________________________________________________________________________ -->


		<!-- Загружаем названия факультетов после окончания загрузки страницы и задаём маски ввода -->
    <script>
      $(document).ready(function(){
      	//маска для номера телефона
      	$('#phone').mask('8(000) 000-00-00');
      	//маска для номера студенческого
      	$('#studentID').mask('00000000', {'translation': {0: {pattern: /[0-9Ии-]/}}});

      	$.getJSON('https://graalogosh.tk/faculty', function(data) {
      		$.each(data, function(index, el) {
      			 $('<option value="' + el.faculty + '">' + el.faculty + '</option>').appendTo('#faculty');
      		});
      	});
      });
    </script>


<!-- ____________________________________________________________________________________________________ -->


		<!-- Очищаем поля ввода при нажатии на кнопку "Сбросить" -->
		<script>
			function onClickClear(){
				$('#studentID').val('');
				$('#name').val('');
				$('#phone').val('');
				$('#educationalGroup').val('');
				$('#faculty').val(0);
			}
		</script>


		<!--  -->    
    <script>
      function onClickFind(){
      	var query_data;

      	if ($('#faculty').val() == null) {
      		query_data = sendInform('studentID', 'name', 'phone','educationalGroup');
      	}
      	else {
      		query_data = sendInform('studentID', 'name', 'phone','educationalGroup','faculty');
      	}

        $("#accountingFees").dataTable( {
          "searching": false,
          "info": false,
          "processing": true,
          "ajax": {
          	"url": "https://graalogosh.tk/student",
          	"data": query_data,
          	"dataSrc": ''
          },
          "columns": [
            {"data": "studentID"},
            {"data": "educationalGroup"},
            {"data": "name"},
            {"data": "academicStatus.title"},
            {"data": "financialStatus.title"},
            {"data": "entryDate.dayOfMonth"},
            {"data": "entryDate.monthValue"},
            {"data": "entryDate.year"},
            {"data": "faculty"}
          ]
        });
      }

    </script>

 </body>